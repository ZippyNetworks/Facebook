<!DOCTYPE html>
<html>
  <head>
  <!-- Bootcards CSS for desktop: -->
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bootcards/1.0.0/css/bootcards-desktop.min.css">
  
    <!--angularjs -->
<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
  
  <!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

<!-- Latest compiled JavaScript -->
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
	<title>Facebook</title>	
 </head>
<body style="background-color:#E0EBFF" ng-app="myApp2" ng-controller="profileController">
	<div style="background-color:#3D3D8B; max-height:50px; color:white;">
	  		<div class ="container">
		    	<div class="row row fluid">
		     			<div class ="col-md-6">
		  				 	<span style="color:white; font-family:verdana; font-size:100%; padding-left:2cm; padding-top:0.5cm"><p>Welcome <a ng-click = "profile()">{{fullname}}</a> </p></span>
		  				 </div>
		  				 <div class ="col-md-3" >
		  				 </div>	
		   				 <div class ="col-md-3" >	
		   					<span style="color:white; font-family:verdana; font-size:100%; "><a ng-click="Signout()" style="color:white" > SignOut</a></span>
		   				</div>	
	  			</div><!------div class="row row fluid"--->
	  		</div>		  				
		</div>  <!-----<div style ends---->		

 	<div class = "container">
	 		<div>
	 			<img  src ="http://www.hdfbcover.com/randomcovers/covers/keep-smiling-Facebook-covers.jpg">
	 		</div>
	 		<div class="row">
				 		   <div class = "col-md-9">
				 		   <nav class="navbar navbar-default ">
							      <ul class="nav nav-pills nav-justified">
							        <li><a href="#">Home</a></li>
							        <li><a href="#" ng-click="aboutmepro()">About me</a></li> 
							        <li><a href="#" ng-click="friendlist()"> Friends</a></li> 
							          <li><a href="#">Photos</a></li>
							      </ul>
								</nav>
						</div> <!--------class = "col-md-9"------>
			</div>	<!---<div class="row"---->	
					
			<div class="row" ng-hide = "myVar2">
	 			<div class = "col-md-3">
	 				<div class="panel panel-default bootcards-richtext">
					  <div class="panel-heading">
					    <h3 class="panel-title">Profile </h3> <a href="" ng-click = "edit()">Edit </a> 
					  </div>
							<div class="panel-body">
											<p> {{lives}} <a><img src = "http://findicons.com/files/icons/2209/beos/128/beos_write.png" height = "20" , width = "20" >edit</a></p> 
							  				 <p>{{works}} <a><img src = "http://findicons.com/files/icons/2209/beos/128/beos_write.png" height = "20" , width = "20" >edit</a></p> 
							  				 <p>{{highschool}}  <a><img src = "http://findicons.com/files/icons/2209/beos/128/beos_write.png" height = "20" , width = "20" >edit</a></p> 
							  				  <p>{{interests}}  <a><img src = "http://findicons.com/files/icons/2209/beos/128/beos_write.png" height = "20" , width = "20" >edit</a></p>
							  				    <p>{{aboutme}}  <a><img src = "http://findicons.com/files/icons/2209/beos/128/beos_write.png" height = "20" , width = "20" >edit</a></p>
							  				   
					  				</div> <!--/div class="panel-body"--->  
					 </div><!------div class="panel panel-default ---------->
					<br>
					
					<div class="panel panel-default bootcards-richtext">
						  <div class="panel-heading">
						    <h3 class="panel-title">Add Life Event </h3> <a href="" ng-click = "edit()">Edit </a> 
						  </div>
							  <div class="panel-body">
						  				  <p><img src = "http://businessbazaar.net/subcategory/images/home_alt.png" height = "20" , width = "20" >{{lifeevent}}  <a><img src = "http://findicons.com/files/icons/2209/beos/128/beos_write.png" height = "20" , width = "20" >edit</a></p> 
				  			</div>   
					</div><!------div class="panel panel-default ---------->
					
					
				</div><!-------------div class = "col-md-3"-------->
			
	 		 <div class = "col-md-6">
	 				<form role="form" >
					    <div class="form-group">
						    <textarea class="form-control" rows="4" ng-model="text"  placeholder = "What's on your mind"></textarea>
		        				<div align = "right"  style = "background-color: white">
					     		<button type="button" class="btn btn-default" ng-click="postfeed(text)">Post</button>
  						 		</div>
		        				
			           	</div>
			           	
			           	<div ng-repeat="myfeed in myfeeds">
		  					  <div class="panel panel-default">  
			           				<div class="panel-heading">	 
			           				   <img src="http://www.icartoonwallpapers.com/wp-content/uploads/2015/09/Cartoon-Bunny.jpg" height="30" width= "30" > Posted {{myfeed.hour + " hour " + myfeed.minute + " minute ago" }}	                
	                    			</div>
	                   		
	                   				 <div class="panel-body">
				           			{{myfeed.content}}
		           		  			</div>
		           			</div>		 
  						</div>
  						
	 			</div>
	 		</div><!--------------div row-------------------->
	 	
	 	
	 		<div class = "row" ng-hide = "myVar">
	 		 <div class="col-sm-9 bootcards-list" id="list" data-title="Contacts">
			        <div class="panel panel-default">  
			           <div class="panel-heading">	     
			            <div class="search-form">
			              <div class="row">
			             		 <div class="col-xs-2">
				                 FRIENDS
								</div>  
			              	  	<div class="col-xs-3">
									<select class="form-control" id="add" ng-model="selectedPerson">
												<option>Friends</option>
												<option ng-repeat="fuser in userdetails2" value="{{fuser.email}}">{{fuser.firstname}}</option>
									</select> 
								</div>
								<div class="col-xs-2">	
									<a class="btn btn-primary btn-default" href="#" onclick="bootcards.hideOffCanvasMenu()" >
				                       <span  ng-model= "clicked" ng-click = "addfriend(selectedPerson);">Add Friends</span>
				                      </a>	 
							    </div>
				                <div class="col-xs-4" align="right">
				                  	<label><input type="text" class="form-control" placeholder="Search for your friends" ng-model="searchText"></label>
				                </div>
			              
			                </div><!-----------------row---->
			              </div> <!------searchform----------------->               
			            </div>  <!----------panel heading-------->        
		          <div class="panel-body">
			  				<div class="bootcards-list">
				             <a class="list-group-item" href="#" ng-repeat="friend in userdetails.friends | filter:searchText">
				               <img src="http://www.newyorker.com/wp-content/uploads/2014/08/Stokes-Hello-Kitty2-1200.jpg" class="img-rounded pull-left">
				              <h4 class="list-group-item-heading">{{friend.ffname + " " + friend.flname}}</h4>
				              <span class="list-group-item-text">California</span>
				              <button style="float: right;" type="button" class="btn btn-default" ng-click = "decline(friend.id)" style="cursor: pointer;" >Delete</button>
				            </a>
		           		  </div>
		           </div>	<!----------panel body-------->   	  
				</div>					
			</div>		
	 	</div>	<!---------row--------->
	<!----------------------------------LIFE EVENTS--------------------------------------->
	 	
	 	
	 <!--------------ABOUT ME----------------------->		
	 		<div class = "row" ng-hide = "myVar3">
	 		 <div class="col-sm-9 bootcards-list" id="list" data-title="Contacts">
			        <div class="panel panel-default">  
			           <div class="panel-heading">	     
			            <div class="search-form">
				                PROFILE
			              </div> <!------searchform----------------->               
			            </div>  <!----------panel heading-------->        
		          <div class="panel-body">
							  <form class="form-horizontal">
							                <b>
							                <div class = "col-sm-3">
												Work Details  
											</div>
											 <div class = "col-sm-9">
												<input type="text" class="form-control" ng-model="works" value="{{works}}">
											</div><br><br>	
											
											<div class = "col-sm-3">
												Education Details  
											</div>
											 <div class = "col-sm-9">
											  <input type="text" class="form-control" ng-model="highschool" value="{{highschool}}">
											</div>	<br><br>
											
											<div class = "col-sm-3">
												Interests 
											</div>
											 <div class = "col-sm-9">
											 <input type="text" class="form-control" ng-model="interests" value="{{interests}}">
											</div>	<br><br>
											
											<div class = "col-sm-3">
												Add life Events  
											</div>
											 <div class = "col-sm-9">
												 <input type="text" class="form-control" ng-model = "lifeevent" value="{{lifeevent}}">
											</div>	<br><br>
											</b>	
											   
											    
											    			      
						    </form>
						  </div>
						  <div class="panel-footer">
						    <small><Button class="btn btn-primary btn-default" ng-click = "savechanges(work,highschool,interests,lifeevent,aboooutme)">Save Changes</Button></small>
						  </div>
						</div>
		           </div>	<!----------panel body-------->   	  
				</div>					
			</div>		
	 	</div>	<!---------row--------->		
	 		
	 		
 	</div><!---------------container------->
 	
 	
 	
	<script>
		var app = angular.module('myApp2', []);
		app.controller('profileController', function($scope,$http) {
		
			  $scope.myVar = true;
			   $scope.myVar3 = true;
			  $scope.myVar2 = false;
			  $scope.friendlist = function(){
			    $scope.myVar = !$scope.myVar ;
			    $scope.myVar2 = !$scope.myVar2 ;
			  }
			  
			  $scope.aboutmepro = function(){
			    $scope.myVar3 = !$scope.myVar3 ;
			      $scope.myVar2 = !$scope.myVar2 ;
			  }				  
			  
			   	 	
		 	 	$scope.loadprofile = function() {
			    	$http({
			            method: 'GET',
			            url:  '/loadprofile',
			            }).success(function(response){
			           		alert(JSON.stringify(response));
			           		$scope.text = "";
			           		$scope.userdetails = JSON.parse(response.users);
			           		$scope.userdetails2 = JSON.parse(response.user2);
			           		
			            	 $scope.fullname= JSON.parse(response.fullname);
			            	 $scope.lives= "Lives in " + JSON.parse(response.lives);
			            	 $scope.works=  JSON.parse(response.works);
			            	 $scope.highschool= JSON.parse(response.highschool);
							 $scope.aboutme= "About me : " +JSON.parse(response.aboutme);	
							 $scope.interests=  JSON.parse(response.interests);
							 $scope.lifeevent=  JSON.parse(response.lifeevent);
							  $scope.fusers =  JSON.parse(response.users);
							  $scope.count =  JSON.parse(response.notif);
						 	$scope.friends = 	JSON.parse(response.friends);
						 	$scope.feeds = JSON.parse(response.feeds);
						 	$scope.myfeeds = JSON.parse(response.myfeeds);
			        }).error(function(error){
			            alert("ERROR LOADING");
			        });
			    };
		 	 
		 	  $scope.loadprofile();
		 	  
		 	  	$scope.addfriend = function(mid) {	
		 	 	$http({
			            method: 'POST',
			            url:  '/addfriend',
			            data: {"mid": mid }
			            }).success(function(response){
			           		 alert("Request sent");
			           		 $scope.loadprofile();
			           		 $scope.loadpage();
				       			 }).error(function(error){
				           		alert("ERROR ADDING FRIEND");
				       			});
			 };
			 
			 
			 
		 	  	$scope.savechanges = function(work,highschool,interests,lifeevent,aboutme){	
		 	 	$http({
			            method: 'POST',
			            url:  '/savechanges',
			            data: {"work": work , "highschool": highschool,"interests": interests,"lifeevent" : lifeevent, "aboutme" : aboutme }
			            }).success(function(response){
			               $scope.loadpage();
			           		 $scope.loadprofile();
			           		 alert("Updated Profile Changes");
			           		  
				       			 }).error(function(error){
				           		alert("ERROR UPDATING PROFILE");
				       			});
			 };
			 
			 
			  $scope.decline = function(mid) {	
		 	 	$http({
			            method: 'POST',
			            url:  '/decline',
			            data: {"mid": mid }
			            }).success(function(response){
			           		 alert("Request declined");
			           		 $scope.loadpage();
			           		  $scope.loadprofile();
				       			 }).error(function(error){
				           		alert("ERROR DECLINING");
				       			});
			 };
			  
			   $scope.postfeed = function(text) {	
		 	 	$http({
			            method: 'POST',
			            url:  '/postfeed',
			            data: {"text": text }
			            }).success(function(response){
			             alert("Added post");
			           		 $scope.loadprofile();	 
			           		
			           		 
				       			 }).error(function(error){
				           		alert("ERROR POSTING NEWS FEED");
				       			});
			 };
			  
		});
	</script>	
 </body>
 </html>